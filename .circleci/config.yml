version: 2.1

# -------------------------------------------------------------------------------------------------
# ORBS
# -------------------------------------------------------------------------------------------------

orbs:
  frontend: ornikar/frontend-orb@8.2.0

# -------------------------------------------------------------------------------------------------
# WORKFLOWS
# -------------------------------------------------------------------------------------------------

workflows:
  version: 2

  main-workflow:
    jobs:
      - frontend/checks:
          name: checks

      - frontend/lint-src:
          name: lint
          use-cache: false
          cache-version: none
          run-tsc: false

      # release
      - hold-release:
          type: approval
          filters:
            branches:
              only: main

      - frontend/monorepo-release:
          context: npm-publish
          npm-publish: true
          no-private: true
          requires:
            - checks
            - lint
            - hold-release
          filters:
            branches:
              only: main
